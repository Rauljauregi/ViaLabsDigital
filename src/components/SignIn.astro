---
// SignIn.astro
const { isAuthenticated } = Astro.props
const currentLocation = Astro.url.pathname;
---

<div class='flex-grow w-full py-4 flex justify-end'>
  {
    !isAuthenticated ? (
      <form method='post' action='/api/users' id='sign_in' class="gap-2 flex flex-col md:flex-row items-center justify-center w-full md:w-min transition-opacity duration-300" id="sign-in-form">
        <input type='email' required id='email' name='email' placeholder="Tu dirección de correo" class="py-2 px-4 rounded-md text-center ring-0 focus:ring-0 outline-[#ff9900] text-black w-full md:w-max"/>
        <input type="text" id="location" name="location" value={currentLocation} hidden>
        <button type='submit' class="bg-[#ff9900] px-4 py-2 rounded-md text-white hover:bg-white hover:text-[#ff9900] border-2 border-[#ff9900] w-full transition-colors">Login/Suscríbete</button>
      </form>
    ) : (
      <div class="flex flex-col items-center gap-2 text-green-700 font-semibold">
        <p>✅ ¡Estás logueado!</p>
        <form action='/api/auth/signout'>
          <button type='submit' class="text-sm underline hover:text-red-500 transition">Cerrar sesión</button>
        </form>
      </div>
    )
  }
</div>
