---
import { getCollection } from 'astro:content';

export const prerender = false;

const { slug } = Astro.params;

// Verificar si el post existe en la nueva ubicaciÃ³n
const posts = await getCollection('post');
const post = posts.find((p) => p.slug === slug);

if (post) {
  return Astro.redirect(`/post/${slug}`, 301);
} else {
  // Si el post no existe, redirigir a 404
  return Astro.redirect('/404', 404);
}
---