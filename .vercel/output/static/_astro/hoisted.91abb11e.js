import{a as m,g as c,s as l,v as h,b as u}from"./Search.astro_astro_type_script_index_0_lang.0872b243.js";import"./hoisted.bd1eef57.js";const s=new URL(window.location.href),n=s.searchParams.get("customToken"),g=s.searchParams.get("email"),r=s.searchParams.get("customTokenAlreadyPresent"),f=localStorage.getItem("animations")==="true";f&&m(".title",{y:[80,0],opacity:[0,1]},{duration:2.5,opacity:{duration:3},offset:[0,.55,.75]});if(n){const t=c(u),a=await l(t,n),o=await a.user.getIdToken(),e=a.user;e.email?console.log("email already present!"):h(e,g).then(()=>{console.log("Email updated successfully")}).catch(d=>{console.error("Error updating email: ",d)});const i=await fetch("/api/auth/signin",{method:"GET",headers:{Authorization:`Bearer ${o}`}});i.redirected&&window.location.assign(i.url)}if(r){const t=c(u),o=await(await l(t,r)).user.getIdToken(),e=await fetch("/api/auth/signin",{method:"GET",headers:{Authorization:`Bearer ${o}`}});e.redirected&&window.location.assign(e.url)}
